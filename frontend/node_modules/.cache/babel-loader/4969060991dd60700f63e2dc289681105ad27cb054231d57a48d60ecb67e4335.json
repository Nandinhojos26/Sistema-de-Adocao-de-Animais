{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fernando\\\\Desktop\\\\Adocao\\\\frontend\\\\src\\\\components\\\\pages\\\\Pet\\\\MyPets.js\",\n  _s = $RefreshSig$();\nimport api from '../../../utils/api';\nimport { Link } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport styles from './Dashboard.module.css';\nimport RoundedImage from '../../layout/RoundedImage';\n\n/* hooks */\nimport useFlashMessage from '../../../hooks/useFlashMessage';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MyPets() {\n  _s();\n  const [pets, setPets] = useState([]);\n  const [token] = useState(localStorage.getItem('token') || '');\n  const {\n    setFlashMessage\n  } = useFlashMessage();\n  useEffect(() => {\n    api.get('/pets/mypets', {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      setPets(response.data.pets);\n    });\n  }, [token]);\n  async function removePet(id) {\n    let msgType = 'success';\n    const data = await api.delete(`/pets/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      const updatedPets = pets.filter(pet => pet._id != id);\n      setPets(updatedPets);\n      return response.data;\n    }).catch(err => {\n      console.log(err);\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n  }\n  async function concludeAdoption(id) {\n    let msgType = 'success';\n    const data = await api.patch(`/pets/conclude/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(token)}`\n      }\n    }).then(response => {\n      return response.data;\n    }).catch(err => {\n      console.log(err);\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.petslist_header,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Meus Pets Cadastrados\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/pet/add\",\n        children: \"Cadastrar Pet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.petslist_container,\n      children: [pets.length > 0 && pets.map(pet => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.petlist_row,\n        children: [/*#__PURE__*/_jsxDEV(RoundedImage, {\n          src: `${process.env.REACT_APP_API}/images/pets/${pet.images[0]}`,\n          alt: pet.name,\n          width: \"px75\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bold\",\n          children: pet.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.actions,\n          children: pet.available ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [pet.adopter && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.conclude_btn,\n              onClick: () => {\n                concludeAdoption(pet._id);\n              },\n              children: \"Concluir ado\\xE7\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: `/pet/edit/${pet._id}`,\n              children: \"Editar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                removePet(pet._id);\n              },\n              children: \"Excluir\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Pet j\\xE1 adotado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)]\n      }, pet._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this)), pets.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ainda n\\xE3o h\\xE1 pets cadastrados!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(MyPets, \"J76RijwI4RrI7G/0z6eGZbXkU1o=\", false, function () {\n  return [useFlashMessage];\n});\n_c = MyPets;\nexport default MyPets;\nvar _c;\n$RefreshReg$(_c, \"MyPets\");","map":{"version":3,"names":["api","Link","useState","useEffect","styles","RoundedImage","useFlashMessage","jsxDEV","_jsxDEV","Fragment","_Fragment","MyPets","_s","pets","setPets","token","localStorage","getItem","setFlashMessage","get","headers","Authorization","JSON","parse","then","response","data","removePet","id","msgType","delete","updatedPets","filter","pet","_id","catch","err","console","log","message","concludeAdoption","patch","children","className","petslist_header","fileName","_jsxFileName","lineNumber","columnNumber","to","petslist_container","length","map","petlist_row","src","process","env","REACT_APP_API","images","alt","name","width","actions","available","adopter","conclude_btn","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Fernando/Desktop/Adocao/frontend/src/components/pages/Pet/MyPets.js"],"sourcesContent":["import api from '../../../utils/api'\n\nimport { Link } from 'react-router-dom'\nimport { useState, useEffect } from 'react'\n\nimport styles from './Dashboard.module.css'\n\nimport RoundedImage from '../../layout/RoundedImage'\n\n/* hooks */\nimport useFlashMessage from '../../../hooks/useFlashMessage'\n\nfunction MyPets() {\n  const [pets, setPets] = useState([])\n  const [token] = useState(localStorage.getItem('token') || '')\n  const { setFlashMessage } = useFlashMessage()\n\n  useEffect(() => {\n    api\n      .get('/pets/mypets', {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        setPets(response.data.pets)\n      })\n  }, [token])\n\n  async function removePet(id) {\n    let msgType = 'success'\n\n    const data = await api\n      .delete(`/pets/${id}`, {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        const updatedPets = pets.filter((pet) => pet._id != id)\n        setPets(updatedPets)\n        return response.data\n      })\n      .catch((err) => {\n        console.log(err)\n        msgType = 'error'\n        return err.response.data\n      })\n\n    setFlashMessage(data.message, msgType)\n  }\n\n  async function concludeAdoption(id) {\n    let msgType = 'success'\n\n    const data = await api\n      .patch(`/pets/conclude/${id}`, {\n        headers: {\n          Authorization: `Bearer ${JSON.parse(token)}`,\n        },\n      })\n      .then((response) => {\n        return response.data\n      })\n      .catch((err) => {\n        console.log(err)\n        msgType = 'error'\n        return err.response.data\n      })\n\n    setFlashMessage(data.message, msgType)\n  }\n\n  return (\n    <section>\n      <div className={styles.petslist_header}>\n        <h1>Meus Pets Cadastrados</h1>\n        <Link to=\"/pet/add\">Cadastrar Pet</Link>\n      </div>\n      <div className={styles.petslist_container}>\n        {pets.length > 0 &&\n          pets.map((pet) => (\n            <div key={pet._id} className={styles.petlist_row}>\n              <RoundedImage\n                src={`${process.env.REACT_APP_API}/images/pets/${pet.images[0]}`}\n                alt={pet.name}\n                width=\"px75\"\n              />\n              <span className=\"bold\">{pet.name}</span>\n              <div className={styles.actions}>\n                {pet.available ? (\n                  <>\n                    {pet.adopter && (\n                      <button\n                        className={styles.conclude_btn}\n                        onClick={() => {\n                          concludeAdoption(pet._id)\n                        }}\n                      >\n                        Concluir adoção\n                      </button>\n                    )}\n\n                    <Link to={`/pet/edit/${pet._id}`}>Editar</Link>\n                    <button\n                      onClick={() => {\n                        removePet(pet._id)\n                      }}\n                    >\n                      Excluir\n                    </button>\n                  </>\n                ) : (\n                  <p>Pet já adotado</p>\n                )}\n              </div>\n            </div>\n          ))}\n        {pets.length === 0 && <p>Ainda não há pets cadastrados!</p>}\n      </div>\n    </section>\n  )\n}\n\nexport default MyPets\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}